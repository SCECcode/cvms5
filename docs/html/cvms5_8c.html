<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>CVM-S5: src/cvms5.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CVM-S5
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cvms5.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main file for CVM-S5 library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cvms5_8h_source.html">cvms5.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0535f8eef40407d6b93b64709d3cbcf7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a0535f8eef40407d6b93b64709d3cbcf7">cvms5_init</a> (const char *dir, const char *label)</td></tr>
<tr class="separator:a0535f8eef40407d6b93b64709d3cbcf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa640befc95cd89ec5b65abab9c6709dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#aa640befc95cd89ec5b65abab9c6709dd">cvms5_query</a> (<a class="el" href="structcvms5__point__t.html">cvms5_point_t</a> *points, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *data, int numpoints)</td></tr>
<tr class="separator:aa640befc95cd89ec5b65abab9c6709dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ea40c3789ced49f19655962d22767f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a42ea40c3789ced49f19655962d22767f">read_properties</a> (int x, int y, int z, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *data)</td></tr>
<tr class="separator:a42ea40c3789ced49f19655962d22767f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbfbcf7b65fbe653ca346a7d43d07901"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#adbfbcf7b65fbe653ca346a7d43d07901">trilinear_interpolation</a> (double x_percent, double y_percent, double z_percent, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *eight_points, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *ret_properties)</td></tr>
<tr class="separator:adbfbcf7b65fbe653ca346a7d43d07901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af15b82f0e188a01425147ca394c7cd26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#af15b82f0e188a01425147ca394c7cd26">bilinear_interpolation</a> (double x_percent, double y_percent, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *four_points, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *ret_properties)</td></tr>
<tr class="separator:af15b82f0e188a01425147ca394c7cd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fadaa9b9d6624ae5b2baa62418ed806"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a4fadaa9b9d6624ae5b2baa62418ed806">linear_interpolation</a> (double percent, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *x0, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *x1, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *ret_properties)</td></tr>
<tr class="separator:a4fadaa9b9d6624ae5b2baa62418ed806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d8bb2201b10dee7c81e9b1a96bf268"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#ac5d8bb2201b10dee7c81e9b1a96bf268">cvms5_finalize</a> ()</td></tr>
<tr class="separator:ac5d8bb2201b10dee7c81e9b1a96bf268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50fe99aa54d7eaba060bdd647ea1e086"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a50fe99aa54d7eaba060bdd647ea1e086">cvms5_version</a> (char *ver, int len)</td></tr>
<tr class="separator:a50fe99aa54d7eaba060bdd647ea1e086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22588c1d37af02e29feb650c15388a7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a22588c1d37af02e29feb650c15388a7b">read_configuration</a> (char *file, <a class="el" href="structcvms5__configuration__t.html">cvms5_configuration_t</a> *config)</td></tr>
<tr class="separator:a22588c1d37af02e29feb650c15388a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec02ef7515e5117f704cb1f6e86375ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#aec02ef7515e5117f704cb1f6e86375ea">read_vs30_map</a> (char *filename, <a class="el" href="structcvms5__vs30__map__config__t.html">cvms5_vs30_map_config_t</a> *map)</td></tr>
<tr class="separator:aec02ef7515e5117f704cb1f6e86375ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b8ed74535afd6f4e54790ef222bd321"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a3b8ed74535afd6f4e54790ef222bd321">get_vs30_value</a> (double longitude, double latitude, <a class="el" href="structcvms5__vs30__map__config__t.html">cvms5_vs30_map_config_t</a> *map)</td></tr>
<tr class="separator:a3b8ed74535afd6f4e54790ef222bd321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8fe5d070dcb341e71ac6821d5af2b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#aff8fe5d070dcb341e71ac6821d5af2b3">get_vs30_based_gtl</a> (<a class="el" href="structcvms5__point__t.html">cvms5_point_t</a> *point, <a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *data)</td></tr>
<tr class="separator:aff8fe5d070dcb341e71ac6821d5af2b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa319fb90bd40ac8cfaa3928606d81ccc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#aa319fb90bd40ac8cfaa3928606d81ccc">calculate_density</a> (double vs)</td></tr>
<tr class="separator:aa319fb90bd40ac8cfaa3928606d81ccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9858e24fbf6b9fa04d4bffbb0085da46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#a9858e24fbf6b9fa04d4bffbb0085da46">print_error</a> (char *err)</td></tr>
<tr class="separator:a9858e24fbf6b9fa04d4bffbb0085da46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af029487303ffe6ac9ed50f5ed49ab911"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvms5_8c.html#af029487303ffe6ac9ed50f5ed49ab911">try_reading_model</a> (<a class="el" href="structcvms5__model__t.html">cvms5_model_t</a> *model)</td></tr>
<tr class="separator:af029487303ffe6ac9ed50f5ed49ab911"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main file for CVM-S5 library. </p>
<dl class="section author"><dt>Author</dt><dd>David Gill - SCEC <a href="#" onclick="location.href='mai'+'lto:'+'dav'+'id'+'gil'+'@u'+'sc.'+'ed'+'u'; return false;">david<span style="display: none;">.nosp@m.</span>gil@<span style="display: none;">.nosp@m.</span>usc.e<span style="display: none;">.nosp@m.</span>du</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0</dd></dl>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>Delivers CVM-S5 which consists of Po Chen and En-Jui Lee's full 3D tomographic results with a Vs30-based GTL as per Po Chen and Geoff Ely. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af15b82f0e188a01425147ca394c7cd26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bilinear_interpolation </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>four_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>ret_properties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bilinearly interpolates given a x percentage, y percentage, and a plane of data properties in origin, bottom-right, top-left, top-right format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x_percent</td><td>X percentage. </td></tr>
    <tr><td class="paramname">y_percent</td><td>Y percentage. </td></tr>
    <tr><td class="paramname">four_points</td><td>Data property plane. </td></tr>
    <tr><td class="paramname">ret_properties</td><td>Returned data properties. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa319fb90bd40ac8cfaa3928606d81ccc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calculate_density </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates the density based off of Vs. Based on Nafe-Drake scaling relationship.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vs</td><td>The Vs value off which to scale. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Density, in g/m^3. </dd></dl>

</div>
</div>
<a class="anchor" id="ac5d8bb2201b10dee7c81e9b1a96bf268"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvms5_finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when the model is being discarded. Free all variables.</p>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS </dd></dl>

</div>
</div>
<a class="anchor" id="a0535f8eef40407d6b93b64709d3cbcf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvms5_init </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the CVM-S5 plugin model within the UCVM framework. In order to initialize the model, we must provide the UCVM install path and optionally a place in memory where the model already exists.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>The directory in which UCVM has been installed. </td></tr>
    <tr><td class="paramname">label</td><td>A unique identifier for the velocity model. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success or failure, if initialization was successful. </dd></dl>

</div>
</div>
<a class="anchor" id="aa640befc95cd89ec5b65abab9c6709dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvms5_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvms5__point__t.html">cvms5_point_t</a> *&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numpoints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queries CVM-S5 at the given points and returns the data that it finds. If GTL is enabled, it also adds the Vs30 GTL as described by Po Chen.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">points</td><td>The points at which the queries will be made. </td></tr>
    <tr><td class="paramname">data</td><td>The data that will be returned (Vp, Vs, density, Qs, and/or Qp). </td></tr>
    <tr><td class="paramname">numpoints</td><td>The total number of points to query. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS or FAIL. </dd></dl>

</div>
</div>
<a class="anchor" id="a50fe99aa54d7eaba060bdd647ea1e086"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvms5_version </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the version information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ver</td><td>Version string to return. </td></tr>
    <tr><td class="paramname">len</td><td>Maximum length of buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero </dd></dl>

</div>
</div>
<a class="anchor" id="aff8fe5d070dcb341e71ac6821d5af2b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_vs30_based_gtl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvms5__point__t.html">cvms5_point_t</a> *&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the GTL value using the Wills and Wald dataset, given a latitude, longitude and depth.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>The point at which to retrieve the property. Note, depth is ignored. </td></tr>
    <tr><td class="paramname">data</td><td>The material properties at the point specified, or -1 if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success or failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a3b8ed74535afd6f4e54790ef222bd321"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double get_vs30_value </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>longitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>latitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__vs30__map__config__t.html">cvms5_vs30_map_config_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a latitude and longitude in WGS84 co-ordinates, we find the corresponding e-tree octant in the Vs30 map e-tree and read the value as well as interpolate bilinearly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">longitude</td><td>The longitude in WGS84 format. </td></tr>
    <tr><td class="paramname">latitude</td><td>The latitude in WGS84 format. </td></tr>
    <tr><td class="paramname">map</td><td>The Vs30 map structure as defined during the initialization procedure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Vs30 value at that point, or -1 if outside the boundaries. </dd></dl>

</div>
</div>
<a class="anchor" id="a4fadaa9b9d6624ae5b2baa62418ed806"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void linear_interpolation </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>x1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>ret_properties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Linearly interpolates given a percentage from x0 to x1, a data point at x0, and a data point at x1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">percent</td><td>Percent of the way from x0 to x1 (from 0 to 1 interval). </td></tr>
    <tr><td class="paramname">x0</td><td>Data point at x0. </td></tr>
    <tr><td class="paramname">x1</td><td>Data point at x1. </td></tr>
    <tr><td class="paramname">ret_properties</td><td>Resulting data properties. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9858e24fbf6b9fa04d4bffbb0085da46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_error </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints the error string provided.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">err</td><td>The error string to print out to stderr. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a22588c1d37af02e29feb650c15388a7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_configuration </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__configuration__t.html">cvms5_configuration_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the configuration file describing the various properties of CVM-S5 and populates the configuration struct. This assumes configuration has been "calloc'ed" and validates that each value is not zero at the end.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The configuration file location on disk to read. </td></tr>
    <tr><td class="paramname">config</td><td>The configuration struct to which the data should be written. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success or failure, depending on if file was read successfully. </dd></dl>

</div>
</div>
<a class="anchor" id="a42ea40c3789ced49f19655962d22767f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_properties </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the material properties (whatever is available) for the given data point, expressed in x, y, and z co-ordinates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The x coordinate of the data point. </td></tr>
    <tr><td class="paramname">y</td><td>The y coordinate of the data point. </td></tr>
    <tr><td class="paramname">z</td><td>The z coordinate of the data point. </td></tr>
    <tr><td class="paramname">data</td><td>The properties struct to which the material properties will be written. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aec02ef7515e5117f704cb1f6e86375ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_vs30_map </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__vs30__map__config__t.html">cvms5_vs30_map_config_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the format of the Vs30 data e-tree. This file location is typically specified in the configuration file of the model.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The e-tree's file location from which to read. </td></tr>
    <tr><td class="paramname">map</td><td>The outputted map configuration structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adbfbcf7b65fbe653ca346a7d43d07901"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trilinear_interpolation </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>z_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>eight_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvms5__properties__t.html">cvms5_properties_t</a> *&#160;</td>
          <td class="paramname"><em>ret_properties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Trilinearly interpolates given a x percentage, y percentage, z percentage and a cube of data properties in top origin format (top plane first, bottom plane second).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x_percent</td><td>X percentage </td></tr>
    <tr><td class="paramname">y_percent</td><td>Y percentage </td></tr>
    <tr><td class="paramname">z_percent</td><td>Z percentage </td></tr>
    <tr><td class="paramname">eight_points</td><td>Eight surrounding data properties </td></tr>
    <tr><td class="paramname">ret_properties</td><td>Returned data properties </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af029487303ffe6ac9ed50f5ed49ab911"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int try_reading_model </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvms5__model__t.html">cvms5_model_t</a> *&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to read the model into memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The model parameter struct which will hold the pointers to the data either on disk or in memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>2 if all files are read to memory, SUCCESS if file is found but at least 1 is not in memory, FAIL if no file found. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 25 2014 22:24:17 for CVM-S5 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
